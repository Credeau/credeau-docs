# FraudGator

FraudGator is our specialized cloud-based SaaS fraud intelligence product that helps mitigate fraud in financial journeys. Our intelligent fraud detection platform analyzes patterns, behaviors, and risk signals across customer interactions to identify and prevent fraudulent activities in real-time, enabling financial institutions to protect their operations while maintaining seamless customer experiences throughout onboarding, transactions, and account management processes.

## Base URL

```bash
https://fraudgator.credeau.com
```

## Variables

The following variables will be referenced throughout this documentation:

| Variable      | Description                                | Format                                     | Source                                |
|---------------|--------------------------------------------|--------------------------------------------|---------------------------------------|
| `client_id`   | Unique identifier for your organization    | Alphanumeric string                        | Provided by Credeau during onboarding |
| `auth_token`  | Secret token for API authentication        | Alphanumeric string                        | Provided by Credeau during onboarding |
| `user_id`     | Unique identifier for an end user          | Alphanumeric string, max 64 chars, non-PII | Generated by your application         |


> ⚠️ **Note**
>
> Keep these credentials secure and never share them publicly. These credentials are unique to your organization and will be used to authenticate all API requests.

## Hash-Concentration API

```bash
POST /api/hash-concentrations
```

### Authentication

The API requires two authentication headers:

| Header | Value |
|--------|-------|
| `x-client-id` | `<client_id>` |
| `x-auth-token` | `<auth_token>` |

and, one content type header:

| Header | Value |
|--------|-------|
| `Content-Type` | `application/json` |

### Request Parameters

#### Request Body (JSON)

| Parameter                                | Type   | Required | Description |
|------------------------------------------|--------|----------|-------------|
| `user_id`                                | string | Yes      | Unique identifier of the user |
| `use_group_config`                       | bool   | No       | Enable / Disable group configuration  |
| `cutoff_date`                            | string | No       | Max date to check the concentrations |
| `hash_dob`                               | string | No       | MD5 hash of Date of Birth (DOB) |
| `hash_pan`                               | string | No       | MD5 hash of PAN number |
| `hash_email`                             | string | No       | MD5 hash of Email id
| `hash_aadhar`                            | string | No       | MD5 hash of Aadhar number
| `hash_pincode`                           | string | No       | MD5 hash of Pincode
| `hash_bank_name`                         | string | No       | MD5 hash of Bank Name
| `hash_ifsc_code`                         | string | No       | MD5 hash of IFSC code
| `hash_ip_address`                        | string | No       | MD5 hash of IP address
| `hash_upi_handle`                        | string | No       | MD5 hash of UPI handle
| `hash_phone_number`                      | string | No       | MD5 hash of Phone Number
| `hash_email_domain`                      | string | No       | MD5 hash of Email domain (gmail.com, outlook.com, etc.)
| `hash_full_name_pan`                     | string | No       | MD5 hash of Full Name as per PAN
| `hash_father_name_pan`                   | string | No       | MD5 hash of Father Name as per PAN
| `hash_ifsc_first_4_chars`                | string | No       | MD5 hash of IFSC code's first 4 characters
| `hash_bank_account_number`               | string | No       | MD5 hash of Bank account number
| `hash_pdf_bank_account_number`           | string | No       | MD5 hash of Bank account number as per uploaded PDF
| `hash_bank_account_number_last_4_digits` | string | No       | MD5 hash of Bank account number's last 4 characters

#### Request cURL

```bash
curl --location 'https://fraudgator.credeau.com/api/hash-concentrations' \
--header 'x-client-id: <client_id>' \
--header 'x-auth-token: <auth_token>' \
--header 'Content-Type: application/json' \
--data '{
    "user_id": "c3bde0a3-3b44-49e9-8b83-359702149343",
    "use_group_config": true,
    "cutoff_date": "2026-02-02 20:39:12",
    "hash_dob": "2e57e54d4b81eb3a349f78e460a37c72",
    "hash_pan": "be3bfece21b02a8ca68b3c171a954905",
    "hash_email": "d997020ebc85538140cc01d69c6127a5",
    "hash_aadhar": "96f52261755f37500ccecb86e59fd5da",
    "hash_pincode": "e10adc3949ba59abbe56e057f20f883e",
    "hash_bank_name": "f90a2e5019aaeea49920727fd71add5c",
    "hash_ifsc_code": "c174fc94dd5528063fe33989eb18d4e6",
    "hash_ip_address": "e086aa137fa19f67d27b39d0eca18610",
    "hash_upi_handle": "ab754af01b01361797ee19a1eacebe88",
    "hash_phone_number": "e807f1fcf82d132f9bb018ca6738a19f",
    "hash_email_domain": "f74d39fa044aa309eaea14b9f57fe79c",
    "hash_full_name_pan": "bf190352fe524a8def299e7ea982650f",
    "hash_father_name_pan": "f7ecb4230193be7f724a200726929cf5",
    "hash_ifsc_first_4_chars": "7252206ccec513e4a3d3bea7764e8679",
    "hash_bank_account_number": "3417973cd67f37b077e56b82f0cc306f",
    "hash_pdf_bank_account_number": "3417973cd67f37b077e56b82f0cc306f",
    "hash_bank_account_number_last_4_digits": "c5c53759e4dd1bfe8b3dcfec37d0ea72"
}'
```

#### Generating a valid Payload

```python
import hashlib

from datetime import datetime


def md5_hash(value: str) -> str:
    """Generate MD5 hash of a string value"""
    return hashlib.md5(value.encode()).hexdigest()


payload = {
    "user_id": "demo_user",
    "use_group_config": True,
    "cutoff_date": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
    "hash_dob": md5_hash('01/01/2000'),
    "hash_pan": md5_hash('FRKPS6254W'),
    "hash_email": md5_hash('dummy@gmail.com'),
    "hash_aadhar": md5_hash('345286574673'),
    "hash_pincode": md5_hash('123456'),
    "hash_bank_name": md5_hash('icici bank pvt ltd'),
    "hash_ifsc_code": md5_hash('icic001234'),
    "hash_ip_address": md5_hash('1.1.1.1'),
    "hash_upi_handle": md5_hash('dummy@icici'),
    "hash_phone_number": md5_hash('1234567890'),
    "hash_email_domain": md5_hash('gmail.com'),
    "hash_full_name_pan": md5_hash('dummy person'),
    "hash_father_name_pan": md5_hash('dummy person senior'),
    "hash_ifsc_first_4_chars": md5_hash('icic'),
    "hash_bank_account_number": md5_hash('123456789012'),
    "hash_pdf_bank_account_number": md5_hash('123456789012'),
    "hash_bank_account_number_last_4_digits": md5_hash('9012')
}
```

### Response

#### Response Fields (JSON)

| Field Name          | Type   | Description |
|---------------------|--------|-------------|
| `request_id`        | string | Unique request identifier for reference |
| `fraud_flag`        | bool   | Flag indicating if the user is a fraudulent one or not |
| `fraud_flag_reason` | string | features contributing to the fraud flag |
| `feature_name`      | int    | Count features across hashes provided |


#### Success Response

##### HTTP 200 OK (Success)

When the hash concentration is evaluated successfully.

```json
{
    "request_id": "feaaa7c3903245dfad9f9b24fd4720b3",
    "fraud_flag": true,
    "fraud_flag_reason": "cnt_users_same_pan_c3=3 | cnt_users_same_email_c3=3 | cnt_users_same_phone_c3=3 | cnt_users_same_aadhar_c3=3 | cnt_users_same_upihandle_c3=3 | cnt_users_same_bank_acc_num_c3=3 | cnt_users_same_pdf_bank_acc_num_c3=3 | ",
    "cnt_users_same_name_c1": 3,
    "cnt_users_same_name_c3": 3,
    "cnt_users_same_name_c7": 3,
    ...
    "cnt_users_same_pan_diff_aadhar_c3": 1,
    "cnt_users_same_pan_diff_aadhar_c7": 1,
    "cnt_users_same_pan_diff_aadhar_c30": 1,
    "cnt_users_same_pan_diff_aadhar_c90": 1
}
```

#### Error Responses

##### HTTP 401 Unauthorized (Wrong credentials)

This error occurs when either an invalid client ID or authentication token is provided in the request headers.

> ⚠️ **Note**
>
> If you receive this error:
>
> 1. Verify that you're using the correct client ID and authentication token
> 2. Contact Credeau support

---

##### HTTP 403 Forbidden (Invalid Access)

This error can occur when the requesting IP address is not whitelisted in the Credeau firewall. For security reasons, all API requests must originate from pre-approved IP addresses.

```html
<html>
    <head><title>403 Forbidden</title></head>
    <body>
        <center><h1>403 Forbidden</h1></center>
    </body>
</html>
```

> ⚠️ **Note**
>
> To resolve this error:
>
> 1. Contact Credeau support to whitelist your IP address
> 2. Provide your organization's name and the IP address(es) that need access
> 3. Once whitelisted, you'll be able to access the API from the approved IP addresses

---

##### HTTP 422 Unprocessable Content (Wrong Request Payload)

This error is returned for the following 2 cases -

1. Missing Required Field

    ```json
    {
        "detail": [
            {
                "type": "missing",
                "loc": [
                    "body",
                    "user_id"
                ],
                "msg": "Field required",
                "input": {
                    "use_group_config": true,
                    "cutoff_date": "2026-02-02 20:39:12",
                    "hash_dob": "2e57e54d4b81eb3a349f78e460a37c72",
                    "hash_pan": "be3bfece21b02a8ca68b3c171a954905",
                    "hash_email": "d997020ebc85538140cc01d69c6127a5",
                    "hash_aadhar": "96f52261755f37500ccecb86e59fd5da",
                    "hash_pincode": "e10adc3949ba59abbe56e057f20f883e",
                    "hash_bank_name": "f90a2e5019aaeea49920727fd71add5c",
                    "hash_ifsc_code": "c174fc94dd5528063fe33989eb18d4e6",
                    "hash_ip_address": "e086aa137fa19f67d27b39d0eca18610",
                    "hash_upi_handle": "ab754af01b01361797ee19a1eacebe88",
                    "hash_phone_number": "e807f1fcf82d132f9bb018ca6738a19f",
                    "hash_email_domain": "f74d39fa044aa309eaea14b9f57fe79c",
                    "hash_full_name_pan": "bf190352fe524a8def299e7ea982650f",
                    "hash_father_name_pan": "f7ecb4230193be7f724a200726929cf5",
                    "hash_ifsc_first_4_chars": "7252206ccec513e4a3d3bea7764e8679",
                    "hash_bank_account_number": "3417973cd67f37b077e56b82f0cc306f",
                    "hash_pdf_bank_account_number": "3417973cd67f37b077e56b82f0cc306f",
                    "hash_bank_account_number_last_4_digits": "c5c53759e4dd1bfe8b3dcfec37d0ea72"
                }
            }
        ]
    }
    ```

2. Invalid MD5 Hash

    ```json
    {
        "detail": [
            {
                "type": "value_error",
                "loc": [
                    "body",
                    "hash_dob"
                ],
                "msg": "Value error, hash_dob must contain only hexadecimal characters, got: 2e57e54d4b81eb3a349f78e460a37c72-11",
                "input": "2e57e54d4b81eb3a349f78e460a37c72-11",
                "ctx": {
                    "error": {}
                }
            }
        ]
    }
    ```

---

##### HTTP 429 Too Many Requests (Rate Limit Exceeded)

This error is returned when the rate of requests exceeds the allowed limit of 1000 requests per minute per IP.

**Best Practice for Rate Limit Handling**

When implementing retries for rate-limited requests:

1. Use exponential backoff: Start with a base delay (e.g., 1 second) and double it after each retry
2. Add jitter: Include random variation (±20%) to the delay to prevent thundering herd problems

Example implementation:

```python
import random
import time
def get_retry_delay(attempt, base_delay=1, max_delay=60):
    # Calculate exponential backoff
    delay = min(base_delay * (2 ** attempt), max_delay)
    # Add jitter (±20%)
    jitter = delay * 0.2
    return delay + random.uniform(-jitter, jitter)
```

This approach helps distribute retry attempts and prevents overwhelming the API when rate limits are hit.

## Face-Match API

```bash
POST /api/face-match
```

### Authentication

The API requires two authentication headers:

| Header | Value |
|--------|-------|
| `x-client-id` | `<client_id>` |
| `x-auth-token` | `<auth_token>` |

and, one content type header:

| Header | Value |
|--------|-------|
| `Content-Type` | `application/json` |

### Request Parameters

#### Request Body (JSON)

| Parameter              | Type   | Required | Description |
|------------------------|--------|----------|-------------|
| `user_id`              | string | Yes      | Unique identifier of the user |
| `source_face`          | string | Yes      | Base64 encoded string of the source image bytes (Aadhar Card, PAN Card, etc.) |
| `target_face`          | string | Yes      | Base64 encoded string of the target image bytes (User Selfie) |
| `similarity_threshold` | float  | Yes      | Minimum similarity score (between 0 and 100) required for face match |

#### Request cURL

```bash
curl --location 'https://fraudgator.credeau.com/api/face-match' \
--header 'x-client-id: <client_id>' \
--header 'x-auth-token: <auth_token>' \
--header 'Content-Type: application/json' \
--data '{
  "user_id": "c034852d-238c-49f0-a946-5ef9f3f0eab0",
  "source_face": "<Base64 encoded string of the source image bytes>",
  "target_face": "<Base64 encoded string of the target image bytes>",
  "similarity_threshold": 80.0
}'
```

#### Generating a valid Payload

```python
import base64


def load_and_encode_image(file_path: str) -> str:
    """Generate MD5 hash of a string value"""
    with open(file_path, 'rb') as f:
        image_bytes = f.read()
    
    return base64.b64encode(image_bytes).decode('utf-8')


payload = {
    "user_id": "c034852d-238c-49f0-a946-5ef9f3f0eab0",
    "source_face": load_and_encode_image('source_image.jpg'),
    "target_face": load_and_encode_image('target_image.jpg'),
    "similarity_threshold": 80.0
}
```

### Response

#### Response Fields (JSON)

| Field Name      | Type   | Description |
|-----------------|--------|-------------|
| `user_id`       | string | Unique identifier of the user (as sent in the request) |
| `request_id`    | string | Unique request identifier for reference |
| `matched`       | bool   | Flag indicating if the faces match or not |
| `similarity`    | float  | Similarity score between the faces (between 0 and 100) |
| `confidence`    | float  | Confidence score of the face match prediction (between 0 and 100) |
| `face_detected` | bool   | Flag indicating if a face was detected in the source and target images |

#### Success Response

##### HTTP 200 OK (Success)

1. When the face matches successfully with high confidence -

    ```json
    {
        "matched": true,
        "similarity": 99.99600982666016,
        "confidence": 99.99996185302734,
        "face_detected": true,
        "request_id": "dc32da44b3fb46679cf5a5121ea72481",
        "user_id": "4630b946-7311-410b-adc1-d66de3c2905c"
    }
    ```

2. When the face does not match due to different target image -

    ```json
    {
        "matched": false,
        "similarity": 0.0,
        "confidence": 0.0,
        "face_detected": true,
        "request_id": "ddefe025883a415da0168ef42b922d0c",
        "user_id": "b79a87e5-a2a7-49d6-8652-f80cbf8bd564"
    }
    ```

3. When no face was detected in the source / target image -

    ```json
    {
        "matched": false,
        "similarity": 0.0,
        "confidence": 0.0,
        "face_detected": false,
        "request_id": "b005c7d7488a4574b34e0d040905121b",
        "user_id": "a3ca6e04-fddd-4f63-8285-ebe621c0c7a4"
    }
    ```

#### Error Responses

##### HTTP 401 Unauthorized (Wrong credentials)

This error occurs when either an invalid client ID or authentication token is provided in the request headers.

> ⚠️ **Note**
>
> If you receive this error:
>
> 1. Verify that you're using the correct client ID and authentication token
> 2. Contact Credeau support

---

##### HTTP 403 Forbidden (Invalid Access)

This error can occur when the requesting IP address is not whitelisted in the Credeau firewall. For security reasons, all API requests must originate from pre-approved IP addresses.

```html
<html>
    <head><title>403 Forbidden</title></head>
    <body>
        <center><h1>403 Forbidden</h1></center>
    </body>
</html>
```

> ⚠️ **Note**
>
> To resolve this error:
>
> 1. Contact Credeau support to whitelist your IP address
> 2. Provide your organization's name and the IP address(es) that need access
> 3. Once whitelisted, you'll be able to access the API from the approved IP addresses

---

##### HTTP 422 Unprocessable Content (Wrong Request Payload)

This error is returned for the following 2 cases -

1. Missing Required Field

    ```json
    {
        "detail": [
            {
                "type": "missing",
                "loc": [
                    "body",
                    "source_face"
                ],
                "msg": "Field required",
                "input": {
                    "user_id": "a3ca6e04-fddd-4f63-8285-ebe621c0c7a4",
                    "similarity_threshold": 80.0
                }
            },
            {
                "type": "missing",
                "loc": [
                    "body",
                    "target_face"
                ],
                "msg": "Field required",
                "input": {
                    "user_id": "a3ca6e04-fddd-4f63-8285-ebe621c0c7a4",
                    "similarity_threshold": 80.0
                }
            }
        ]
    }
    ```

2. Invalid Base64 encoded images

    ```json
    {
        "detail": [
            {
                "type": "value_error",
                "loc": [
                    "body",
                    "source_face"
                ],
                "msg": "Value error, Invalid base64 string",
                "input": "not a valid base64 string",
                "ctx": {
                    "error": {}
                }
            },
            {
                "type": "value_error",
                "loc": [
                    "body",
                    "target_face"
                ],
                "msg": "Value error, Invalid base64 string",
                "input": "not a valid base64 string",
                "ctx": {
                    "error": {}
                }
            }
        ]
    }
    ```

3. Invalid value for similarity_threshold

    ```json
    {
        "detail": [
            {
                "type": "value_error",
                "loc": [
                    "body",
                    "similarity_threshold"
                ],
                "msg": "Value error, similarity_threshold must be between 0 and 100",
                "input": 101.0,
                "ctx": {
                    "error": {}
                }
            }
        ]
    }
    ```

---

##### HTTP 429 Too Many Requests (Rate Limit Exceeded)

This error is returned when the rate of requests exceeds the allowed limit of 1000 requests per minute per IP.

**Best Practice for Rate Limit Handling**

When implementing retries for rate-limited requests:

1. Use exponential backoff: Start with a base delay (e.g., 1 second) and double it after each retry
2. Add jitter: Include random variation (±20%) to the delay to prevent thundering herd problems

Example implementation:

```python
import random
import time
def get_retry_delay(attempt, base_delay=1, max_delay=60):
    # Calculate exponential backoff
    delay = min(base_delay * (2 ** attempt), max_delay)
    # Add jitter (±20%)
    jitter = delay * 0.2
    return delay + random.uniform(-jitter, jitter)
```

This approach helps distribute retry attempts and prevents overwhelming the API when rate limits are hit.

## Selfie-Dedup API

```bash
POST /api/selfie-dedup
```

### Authentication

The API requires two authentication headers:

| Header | Value |
|--------|-------|
| `x-client-id` | `<client_id>` |
| `x-auth-token` | `<auth_token>` |

and, one content type header:

| Header | Value |
|--------|-------|
| `Content-Type` | `application/json` |

### Request Parameters

#### Request Body (JSON)

| Parameter              | Type   | Required | Description |
|------------------------|--------|----------|-------------|
| `user_id`              | string | Yes      | Unique identifier of the user |
| `image`                | string | Yes      | Base64 encoded string of the image bytes (User Selfie) |
| `similarity_threshold` | float  | Yes      | Minimum similarity score (between 0 and 100) required for face match |
| `max_faces_threshold`  | int    | Yes      | Max number of faces to match during deduplication |

#### Request cURL

```bash
curl --location 'https://fraudgator.credeau.com/api/selfie-dedup' \
--header 'x-client-id: <client_id>' \
--header 'x-auth-token: <auth_token>' \
--header 'Content-Type: application/json' \
--data '{
  "user_id": "c034852d-238c-49f0-a946-5ef9f3f0eab0",
  "image": "<Base64 encoded string of the image bytes>",
  "similarity_threshold": 80.0,
  "max_faces_threshold": 10
}'
```

#### Generating a valid Payload

```python
import base64


def load_and_encode_image(file_path: str) -> str:
    """Generate MD5 hash of a string value"""
    with open(file_path, 'rb') as f:
        image_bytes = f.read()
    
    return base64.b64encode(image_bytes).decode('utf-8')


payload = {
    "user_id": "c034852d-238c-49f0-a946-5ef9f3f0eab0",
    "image": load_and_encode_image('image.jpg'),
    "similarity_threshold": 80.0,
    "max_faces_threshold": 10
}
```

### Response

#### Response Fields (JSON)

| Field Name            | Type   | Description |
|-----------------------|--------|-------------|
| `user_id`                | string | Unique identifier of the user (as sent in the request) |
| `request_id`             | string | Unique request identifier for reference |
| `indexed`                | bool   | Flag indicating if the image passed was successfully indexed in the database or not |
| `index_error`            | string | Error message indicating issues with indexing the image |
| `face_associated`        | bool   | Flag indicating if the face was successfully associated with a user in the database or not |
| `face_association_error` | string | Error message indicating issues with associating the face with a user
| `matched_user_ids`       | array  | User ids of users with similar faces |
| `cnt_users_same_face`    | int    | Number of users found with similar faces |

> ⚠️ Note!
>
> Look for `face_associated` flag, if its `true` then the given image has passed all check points and is valid to associate with the user.

#### Success Response

##### HTTP 200 OK (Success)

1. When no other users with same face are found and the selfie face is associated with the user -

    ```json
    {
        "request_id": "b5c98e9b531042bd9b3a8b8050eeb67f",
        "user_id": "demo-user-1",
        "indexed": true,
        "index_error": null,
        "face_associated": true,
        "face_association_error": null,
        "matched_user_ids": [],
        "cnt_users_same_face": 0
    }
    ```

2. When other users with same face are found and the selfie is not associated to the user

    ```json
    {
        "request_id": "fb1448d8b3f14a9a91a71b7923880b01",
        "user_id": "demo-user-2",
        "indexed": true,
        "index_error": null,
        "face_associated": false,
        "face_association_error": "OTHER_USERS_WITH_SAME_FACE",
        "matched_user_ids": [
            "demo-user-1"
        ],
        "cnt_users_same_face": 1
    }
    ```

3. When no face is detected in the selfie -

    ```json
    {
        "request_id": "8bc3f64a002c4dc5ac6871a7a48682e1",
        "user_id": "demo-user-3",
        "indexed": false,
        "index_error": "NO_FACE_FOUND",
        "face_associated": false,
        "face_association_error": "NO_FACE_FOUND",
        "matched_user_ids": [],
        "cnt_users_same_face": 0
    }
    ```

#### Error Responses

##### HTTP 401 Unauthorized (Wrong credentials)

This error occurs when either an invalid client ID or authentication token is provided in the request headers.

> ⚠️ **Note**
>
> If you receive this error:
>
> 1. Verify that you're using the correct client ID and authentication token
> 2. Contact Credeau support

---

##### HTTP 403 Forbidden (Invalid Access)

This error can occur when the requesting IP address is not whitelisted in the Credeau firewall. For security reasons, all API requests must originate from pre-approved IP addresses.

```html
<html>
    <head><title>403 Forbidden</title></head>
    <body>
        <center><h1>403 Forbidden</h1></center>
    </body>
</html>
```

> ⚠️ **Note**
>
> To resolve this error:
>
> 1. Contact Credeau support to whitelist your IP address
> 2. Provide your organization's name and the IP address(es) that need access
> 3. Once whitelisted, you'll be able to access the API from the approved IP addresses

---

##### HTTP 422 Unprocessable Content (Wrong Request Payload)

This error is returned for the following 2 cases -

1. Missing Required Field

    ```json
    {
        "detail": [
            {
                "type": "missing",
                "loc": [
                    "body",
                    "image"
                ],
                "msg": "Field required",
                "input": {
                    "user_id": "demo-user-4",
                    "similarity_threshold": 80.0,
                    "max_faces_threshold": 10
                }
            }
        ]
    }
    ```

2. Invalid Base64 encoded images

    ```json
    {
        "detail": [
            {
                "type": "value_error",
                "loc": [
                    "body",
                    "image"
                ],
                "msg": "Value error, Invalid base64 string",
                "input": "not a valid base64 string",
                "ctx": {
                    "error": {}
                }
            }
        ]
    }
    ```

3. Invalid value for similarity_threshold

    ```json
    {
        "detail": [
            {
                "type": "value_error",
                "loc": [
                    "body",
                    "similarity_threshold"
                ],
                "msg": "Value error, similarity_threshold must be between 0 and 100",
                "input": 101.0,
                "ctx": {
                    "error": {}
                }
            }
        ]
    }
    ```

---

##### HTTP 429 Too Many Requests (Rate Limit Exceeded)

This error is returned when the rate of requests exceeds the allowed limit of 1000 requests per minute per IP.

**Best Practice for Rate Limit Handling**

When implementing retries for rate-limited requests:

1. Use exponential backoff: Start with a base delay (e.g., 1 second) and double it after each retry
2. Add jitter: Include random variation (±20%) to the delay to prevent thundering herd problems

Example implementation:

```python
import random
import time
def get_retry_delay(attempt, base_delay=1, max_delay=60):
    # Calculate exponential backoff
    delay = min(base_delay * (2 ** attempt), max_delay)
    # Add jitter (±20%)
    jitter = delay * 0.2
    return delay + random.uniform(-jitter, jitter)
```

This approach helps distribute retry attempts and prevents overwhelming the API when rate limits are hit.
